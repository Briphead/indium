<!DOCTYPE html>
<html lang="en">

<head>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <link href="https://cdn.jsdelivr.net/gh/eliyantosarage/font-awesome-pro@main/fontawesome-pro-6.5.1-web/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/apps.css">
    <link rel="shortcut icon" href="app.png" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home | Indium</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

</head>

<body style="overflow-x: hidden;">
    <div style="width: 100vw;height: 100vh;z-index: -100000;position: absolute;" id="particles-js"></div>
    <div id="fixed-nav-bar" class="fixed-nav-bar">
        <div class="fixed-nav-bar-container ">
          <a class="icon " style="word-wrap:initial" href="/./">
            <img alt="nav " id="HYimg" src="app.png">
          </a>
        </div>
        <div style="color: #fff;" class="fixed-nav-bar-right">
          <a class="navbar-link" href="/0">
            <i class="fa-solid fa-gamepad navbar-icon"></i>Games </a>
          <a class="navbar-link" href="/~">
            <i class="fa-duotone fa-grid-2 navbar-icon"></i>Apps
          </a>
          <a class="navbar-link" href="/=">
            <i class="fa-solid fa-gear navbar-icon settings-icon"></i>Settings </a>
          <a style="background: #404EED;border-radius: 5px;padding: 5px;" class="navbar-link" target="_blank" rel="noopener no-referrer" href="https://discord.gg/wwNymmb4uR">
            <i class="fa-brands fa-discord navbar-icon"></i>Discord </a>
        </div>
      </div>
      <header class="header">
      <nav data-bs-theme="dark" style="display: block;" class="navbar navbar-expand-lg bg-body-tertiary">
        <div data-bs-theme="dark" class="container-fluid">
          <a class="navbar-brand" href="#">Indium</a>
          <button data-bs-theme="dark" class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">f</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">mobile</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">users</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

<style>
  .searchforapps{
    border: 0;
    outline: 0;
    border-radius: 10px;
    color: #fff;
    box-shadow: 0 15px 15px rgba(0,0,0,0.3);
padding: 15px 30px 15px 30px;
    background-color: rgba(0,0,0,0.4);
    justify-content: center;
    display: flex;
    text-align: center;
  }
  .app-card{
    
    border-radius: 10px;
    padding: 10px;
    background-color: rgba(0,0,0,0.3);
    width: 300px;
    box-shadow: 0 10px 10px rgba(0,0,0,0.4);
    transition: 0.7s;
  }
  .app-list{
    display: flex;
    color: #fff;
    flex-wrap: wrap;
    gap: 30px;
    flex-direction: row;
    align-items: center;
    justify-content: center;
  }
  .description {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
}

  .app-image{
    background-size: cover;
  background-repeat: no-repeat;
  background-position: 50% 50%;
    object-fit: cover;
    /* aspect-ratio: inherit; */
    align-items: center;
    justify-content: center;
    display: flex;
    transition: 0.7s !important;
    text-align: center;
    height: 150px;
    /* transition: ease-in-out; */
    width: 270px;
    border-radius: 15px !important;
  }

  .app-image:hover{
    border-radius: 5px !important;
    /* transition: ease-in-out; */
  }


  .app-card:hover {
    background-size: 400% 400%;
  background: linear-gradient(-45deg, rgb(115, 11, 14), rgb(10, 23, 87));
  animation: gradient 5s ease infinite;
}

@keyframes gradient {
	0% {
		background-position: 0% 50%;
	}
	50% {
		background-position: 100% 50%;
	}
	100% {
		background-position: 0% 50%;
	}
}

</style>

<main style="width: 100vw;">
    <br><br><br><br><br><br><br><br><br><br>
    <center>
    <div class="game-search">
        <input type="text" class="searchforapps" id="searchInput" placeholder="Search for games...">
    </div>
  </center>
  <br><br>
  
    <div id="app-list" class="app-list">
    </div>
    <button id="loadMoreButton" class="btn btn-primary">Load More</button>
    <script>
      function encode(str) {
    if (!str) return str;
    return encodeURIComponent(
        str
            .toString()
            .split('')
            .map((char, ind) =>
                ind % 2 ? String.fromCharCode(char.charCodeAt() ^ 2) : char
            )
            .join('')
    );
}

function openAg(url, ag) {
  localStorage.setItem("currentAg", ag)
  
  agU = encode(url);
  localStorage.setItem('agUrl', agU);
  location.href = '/@';
}



        // Fetch game data from the separate JSON file
        fetch("/assets/json/games.json")
    .then(response => response.json())
    .then(data => {
        const gameList = document.getElementById("app-list");
        const searchInput = document.getElementById("searchInput");
        const loadMoreButton = document.getElementById("loadMoreButton");
        
        // Initialize counter to keep track of the number of games displayed
        let gamesDisplayed = 0;

        // Function to filter games based on search query
        const filterGames = () => {
            const searchTerm = searchInput.value.toLowerCase();

            // Filter broken games and non-broken games
            const brokenGames = data.filter(game =>
                game.name.toLowerCase().includes(searchTerm) && game.broken
            );
            const nonBrokenGames = data.filter(game =>
                game.name.toLowerCase().includes(searchTerm) && !game.broken
            );

            // Clear existing game list
            gameList.innerHTML = "";

            // Display games based on the current counter value
            for (let i = 0; i < gamesDisplayed; i++) {
                if (nonBrokenGames[i]) {
                    displayGame(nonBrokenGames[i]);
                }
                if (brokenGames[i]) {
                    displayGame(brokenGames[i]);
                }
            }

            // Toggle the visibility of the "Load More" button
            if (gamesDisplayed < nonBrokenGames.length + brokenGames.length) {
                loadMoreButton.style.display = "block";
            } else {
                loadMoreButton.style.display = "none";
            }
        };

        // Function to display a game card
        const displayGame = (game) => {
          const isBroken = game.broken === true;
                const titleColor = isBroken ? 'red' : 'inherit'; // Set title color based on broken status
            const gameCard = document.createElement("div");
            gameCard.innerHTML = `
                <div data-url="${game.url}" data-name="${game.name}" class="app-card">
                    <img class="app-image" src="${game.imageSrc}" alt="">
                    <br>
                    <h1 style="color: ${titleColor};" class="title">${game.name}</h1>
                    <p class="description">
                        ${game.description}
                    </p>
                    <button class="btn btn-success" id="launchapp">Launch</button>
                </div>
            `;
            gameList.appendChild(gameCard);
        };

        // Initial display of games
        filterGames();

        // Event listener for search input
        searchInput.addEventListener("input", filterGames);

        // Event listener for the "Load More" button click
        loadMoreButton.addEventListener("click", () => {
            gamesDisplayed += 5; // Increase the counter by 5
            filterGames(); // Redisplay the games
        });
    })
    .catch(error => console.error("Error loading JSON:", error));
    </script>
</main>

<script>
  document.onclick = hideMenu; 
  document.oncontextmenu = rightClick; 

  function hideMenu() { 
    document.getElementById("contextMenu").style.display = "none";
  } 

  function rightClick(e) { 
    e.preventDefault(); 

    if (document.getElementById("contextMenu").style.display == "block") {
      hideMenu();
    } else { 
      var menu = document.getElementById("contextMenu"); 
      menu.style.display = 'block'; 
      menu.style.left = e.pageX + "px"; 
      menu.style.top = e.pageY + "px"; 
    } 
  } 
</script>

<script src="/assets/js/script.js"></script>
<script rel="preload" src="/assets/js/main.js"></script>
<script src="/assets/js/index.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
<script src="https://kit.fontawesome.com/1237c86ba0.js" crossorigin="anonymous"></script>
</body>
</html>
